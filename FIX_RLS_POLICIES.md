# üö® –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï: RLS –ü–æ–ª–∏—Ç–∏–∫–∏

## –ü—Ä–æ–±–ª–µ–º–∞
–¶–µ–Ω—ã –∏ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑-–∑–∞ –≤–∫–ª—é—á–µ–Ω–Ω—ã—Ö RLS (Row Level Security) –ø–æ–ª–∏—Ç–∏–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

## ‚úÖ –ë—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –ó–∞–π—Ç–∏ –≤ Supabase Dashboard
1. –û—Ç–∫—Ä—ã—Ç—å https://supabase.com/dashboard
2. –í—ã–±—Ä–∞—Ç—å –≤–∞—à –ø—Ä–æ–µ–∫—Ç
3. –ü–µ—Ä–µ–π—Ç–∏ –≤ **SQL Editor**

### –®–∞–≥ 2: –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL –∫–æ–º–∞–Ω–¥—ã
–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–æ—Ç SQL —Å–∫—Ä–∏–ø—Ç:

```sql
-- –û—Ç–∫–ª—é—á–∞–µ–º RLS –¥–ª—è –ø—É–±–ª–∏—á–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
ALTER TABLE public.prices DISABLE ROW LEVEL SECURITY;
ALTER TABLE public.subscriptions DISABLE ROW LEVEL SECURITY;
ALTER TABLE public.events DISABLE ROW LEVEL SECURITY;
ALTER TABLE public.price_categories DISABLE ROW LEVEL SECURITY;
ALTER TABLE public.form_submissions DISABLE ROW LEVEL SECURITY;

-- –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º –¥–æ—Å—Ç—É–ø –¥–ª—è –∞–Ω–æ–Ω–∏–º–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
GRANT SELECT ON public.prices TO anon, authenticated, service_role;
GRANT SELECT ON public.subscriptions TO anon, authenticated, service_role;
GRANT SELECT ON public.events TO anon, authenticated, service_role;
GRANT SELECT ON public.price_categories TO anon, authenticated, service_role;
GRANT SELECT, INSERT ON public.form_submissions TO anon, authenticated, service_role;
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥ —Å–∞–π—Ç –¥–æ–ª–∂–µ–Ω —Å—Ä–∞–∑—É –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
- https://yuliia-studio.vercel.app/preis
- –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å: "üü¢ –ó–∞–≥—Ä—É–∂–µ–Ω–æ —Ü–µ–Ω: 59" (–∏–ª–∏ –±–æ–ª—å—à–µ)

## üîç –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å RLS

–í SQL Editor –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```sql
SELECT
    schemaname,
    tablename,
    rowsecurity as rls_enabled
FROM pg_tables
WHERE schemaname = 'public'
ORDER BY tablename;
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å `false` –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü.**

## ‚ö†Ô∏è –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ï—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –æ—Ç–∫–ª—é—á–∞—Ç—å RLS –ø–æ–ª–Ω–æ—Å—Ç—å—é, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª–∏—Ç–∏–∫–∏:

```sql
-- –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É –¥–ª—è —á—Ç–µ–Ω–∏—è –≤—Å–µ—Ö –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö —Ü–µ–Ω
CREATE POLICY "Allow public read published prices" ON public.prices
FOR SELECT USING (is_published = true);

-- –°–æ–∑–¥–∞—Ç—å –ø–æ–ª–∏—Ç–∏–∫—É –¥–ª—è —á—Ç–µ–Ω–∏—è –≤—Å–µ—Ö –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–¥–ø–∏—Å–æ–∫
CREATE POLICY "Allow public read published subscriptions" ON public.subscriptions
FOR SELECT USING (is_published = true);
```

## üéØ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

–°–∞–π—Ç –¥–æ–ª–∂–µ–Ω –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å:
- ‚úÖ –¶–µ–Ω—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- ‚úÖ –ü–æ–¥–ø–∏—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
- ‚úÖ –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç

---

**–í–ê–ñ–ù–û**: –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL –∫–æ–º–∞–Ω–¥—ã –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å, –∏ —Å–∞–π—Ç –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ! üöÄ